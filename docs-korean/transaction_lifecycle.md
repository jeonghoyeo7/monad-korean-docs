# 모나드에서의 트랜잭션 생명 주기 (Transaction Life Cycle)

## 트랜잭션 제출

트랜잭션 생명 주기는 사용자가 서명된 트랜잭션을 준비하고 RPC 노드에 제출하면서 시작됩니다.

트랜잭션은 일반적으로 애플리케이션 프론트엔드에 의해 준비된 후 사용자의 지갑에 서명을 위해 제시됩니다. 대부분의 지갑은 이 트랜잭션에 대한 가스 **한도**를 채우기 위해 `eth_estimateGas` RPC 호출을 수행하지만, 사용자는 지갑에서 이를 덮어쓸 수도 있습니다. 또한, 사용자는 트랜잭션에 대한 가스 **가격**을 선택하도록 요청받습니다. 이는 가스 단위당 NativeTokens의 수입니다.

사용자가 지갑에서 서명을 승인한 후 서명된 트랜잭션은 `eth_sendTransaction` 또는 `eth_sendRawTransaction` API 호출을 사용하여 RPC 노드에 제출됩니다.

특히 모나드에서는 가스 한도가 캐리지 가스와 실행 가스의 합계입니다. 캐리지 가스는 상수입니다.

## 멤풀 전파

RPC 노드는 대기 중인 트랜잭션을 컨센서스에 참여하는 다른 모나드 노드에 전달합니다. 대기 중인 트랜잭션의 집합은 '멤풀'이라고 불립니다. 멤풀 동작에 대한 추가 정보는 [멤풀](shared_mempool.md)을 참조하십시오.

스팸 방지 이유로, 노드는 [캐리지 비용 및 예약 잔액](carriage_cost_reserve_balance.md)에 충분한 가스가 있는 경우에만 트랜잭션을 멤풀에 추가합니다.

## 블록 포함

모나드BFT는 블록을 생성하기 위해 회전하는 리더 메커니즘을 사용합니다. 각 라운드에서 리더는 대기 중인 트랜잭션 목록에서 블록을 조립합니다. 블록에 포함할 트랜잭션을 선택한 후 리더는 캐리지 비용으로 예약 잔액을 차감합니다.

블록은 [모나드BFT](monad_bft.md)에서 논의된 대로 네트워크를 통해 전파됩니다. 이 블록에 대한 정족수 증명(QC)은 다음 라운드의 컨센서스에서 전파됩니다(즉, 다음 리더가 전송). QC를 확인한 후, 투표 노드는 서로에게 투표를 보냅니다. 노드가 2/3의 지분 가중치가 찬성 투표하는 것을 확인하면 해당 블록을 확정합니다.

블록이 확정되면, 트랜잭션은 블록체인의 역사에서 공식적으로 "발생"한 것이 됩니다. 그 순서가 결정되었으므로, 그 진실 값(즉, 성공 또는 실패 여부 및 실행 직후의 결과)이 결정됩니다.

## 로컬 실행

노드가 블록을 확정하자마자 해당 블록의 트랜잭션 실행을 시작합니다. 효율성을 위해 트랜잭션은 [낙관적 병렬 실행](parallel_execution.md)으로 실행되지만, 원래 순서대로 결과가 커밋되기 때문에 마치 트랜잭션이 직렬로 실행된 것과 같습니다.

## 결과 조회

사용자는 `eth_getTransactionByHash` 또는 `eth_getTransactionReceipt`를 호출하여 트랜잭션 결과를 조회할 수 있습니다. RPC 노드는 로컬 노드에서 실행이 완료되면 곧바로 응답을 반환합니다.
